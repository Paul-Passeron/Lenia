#include <iostream>
#include "lenia_math.h"
#include "lenia_core.h"


// int main(int argc, char *argv[]){
//     cout << "Hello, World!" << endl;
//     return 0;
// }


float cells[32][29] = {{0,0,0,0,0,0,0,0,0,0.01,0.15,0.17,0.02,0,0,0.06,0,0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0.19,0.46,0.39,0.49,1.00,1.00,1.00,0.61,0.28,0.21,0.15,0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0.30,0,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,0.59,0.11,0.02,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0.79,1.00,1.00,1.00,1.00,1.00,1.00,1.00,0.78,0.88,1.00,1.00,1.00,0.56,0.07,0.03,0,0,0,0,0,0,0,0,0}, {0,0,0,0.18,0.88,0.97,0.99,1.00,1.00,1.00,0.23,0,0,0.13,0.91,1.00,1.00,1.00,0.46,0.10,0,0,0,0,0,0,0,0,0}, {0,0,0.75,0.48,0.42,0.58,1.00,1.00,1.00,0,0,0,0,0.10,0.95,1.00,1.00,1.00,0.84,0.21,0.07,0,0,0,0,0,0,0,0}, {0,0.01,0,0,0,0.70,1.00,0,0,0,0,0,0,1.00,1.00,1.00,1.00,1.00,1.00,0.32,0.13,0,0,0,0,0,0,0,0}, {0,0,0,0,0.16,0.46,0.12,0.11,0.22,0.07,0,0,0.72,0.95,1.00,1.00,1.00,1.00,1.00,0.29,0.14,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0.17,1.00,0.90,0.41,0.09,0,0,0,0.41,1.00,1.00,1.00,1.00,0.06,0.15,0,0,0,0,0,0,0,0}, {0,0,0,0.02,0,0.33,0.70,1.00,1.00,0.74,0.33,0.03,0,0,0.58,1.00,1.00,1.00,0.27,0,0.12,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0.71,1.00,0.95,0.68,0.61,0.44,0.19,0.14,0.92,1.00,1.00,1.00,0.05,0,0,0.01,0,0,0,0,0,0,0,0}, {0,0,0,0,0.38,0.94,0.87,0.04,0.06,0.49,0.47,0.71,1.00,1.00,1.00,1.00,0,0,0.04,0.17,0.03,0.02,0,0,0,0,0,0,0}, {0,0,0,0.28,0.71,0,0,0,0.09,0.31,0.35,0.18,0.20,0.58,0.84,0,0,0.34,1.00,0.68,0.08,0.07,0.16,0.09,0.04,0,0,0,0}, {0,0,0,0,0.03,0.01,0.34,0.03,0.16,0,0,0,0,0,0,0,0.51,1.00,1.00,0.30,0,0,0,0.10,0.17,0.14,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.49,0.94,0.99,0.21,0,0,0.19,0.80,0.91,0.73,0.27,0.10,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.38,0.64,0,0,0,1.00,1.00,1.00,1.00,1.00,0.94,0.30,0.05,0}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.42,1.00,1.00,1.00,1.00,1.00,1.00,1.00,0.88,0.22,0.04}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.62,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,1.00,0.47,0.01}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.68,1.00,1.00,0.50,0.58,1.00,1.00,1.00,1.00,1.00,0.88,0.09}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.66,1.00,0.03,0,0.05,0.94,1.00,0.81,0.99,1.00,1.00,0.21}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.52,0.54,0.07,0,0.22,0.73,0,0,0.55,1.00,1.00,0.30}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.51,0.69,0.29,0,0,0,0,0,0.39,1.00,1.00,0.19}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.14,0.88,0.44,0,0,0,0,0,0.61,1.00,1.00,0.06}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.29,1.00,0.62,0.02,0,0,0,0.34,1.00,1.00,0.97,0}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.05,0,0.35,0.91,1.00,1.00,0.29,0.09,0.08,1.00,1.00,1.00,1.00,0.66,0}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.01,0.53,0.87,0.82,1.00,0.59,0.16,1.00,1.00,1.00,1.00,1.00,1.00,0.06,0}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.61,0.63,0.20,0.18,0,0.22,1.00,1.00,1.00,1.00,1.00,1.00,0.65,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.55,0.96,0.97,1.00,1.00,1.00,1.00,0.15,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.80,1.00,1.00,1.00,0.13,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.26,0.85,1.00,1.00,0,0,0.05,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.53,0.61,0,0,0,0.05,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.28,0,0,0,0,0}};

float dt = 0.05;
float r = 10;
float alpha = 4;
float mu = 0.14;
float sigma = 0.02;
float beta_ [B] = {1, 1, 1}; 
int w = 800;
int h = 800;

int main(void)
{
    Lenia lenia = Lenia(r, alpha, mu, sigma, beta_, dt);
    lenia.test_fftw();
    lenia.popul_grid(cells, 32, 29);
    InitWindow(w, h, "raylib [core] example - basic window");
    lenia.set_grid_random();
    // SetTargetFPS(1);
    while (!WindowShouldClose())
    {
        BeginDrawing();
        // displayKernel(w, h, lenia);
        displayGrid(w, h, lenia);
        // displayTest(w, h, lenia);
        // lenia.print_kernel();
        lenia.update();
        DrawFPS(0, 0);
        EndDrawing();
    }

    CloseWindow();

    return 0;
}